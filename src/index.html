<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>التقويم الدراسي للفصل الثاني 1446 هـ - 2024 م</title>
    <link rel="stylesheet" href="./css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <div id="size"></div>
        <div class="stick">
            <button id="themeToggle">Toggle Theme</button>
            <button id="printButton">Print Calendar</button>
        </div>
        <h1 id="calendar-id">التقويم الجامعي للفصل الثاني 1446 هـ - 2025 م</h1>
        <div class="calendar-grid" id="calendar-grid">
            <!-- JavaScript will dynamically insert the calendar weeks here -->
            <div class="week">
                <h2>الأسبوع 1</h2>
                <div class="day-box event">
                    <h3>الأحد</h3><span>بداية الدراسة للفصل الثاني</span>
                    <p>7-5 / 05 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>7-6 / 06 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>7-7 / 07 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>7-8 / 08 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>7-9 / 09 Jan</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>7-10 / 10 Jan</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>7-11 / 11 Jan</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 2</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>7-12 / 12 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>7-13 / 13 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>7-14 / 14 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>7-15 / 15 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>7-16 / 16 Jan</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>7-17 / 17 Jan</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>7-18 / 18 Jan</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 3</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>7-19 / 19 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>7-20 / 20 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>7-21 / 21 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>7-22 / 22 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>7-23 / 23 Jan</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>7-24 / 24 Jan</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>7-25 / 25 Jan</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 4</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>7-26 / 26 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>7-27 / 27 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>7-28 / 28 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>7-29 / 29 Jan</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>7-30 / 30 Jan</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>8-1 / 31 Jan</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>8-2 / 01 Feb</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 5</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>8-3 / 02 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>8-4 / 03 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>8-5 / 04 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>8-6 / 05 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>8-7 / 06 Feb</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>8-8 / 07 Feb</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>8-9 / 08 Feb</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 6</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>8-10 / 09 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>8-11 / 10 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>8-12 / 11 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>8-13 / 12 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>8-14 / 13 Feb</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>8-15 / 14 Feb</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>8-16 / 15 Feb</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 7</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>8-17 / 16 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>8-18 / 17 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>8-19 / 18 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>8-20 / 19 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>8-21 / 20 Feb</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>8-22 / 21 Feb</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>8-23 / 22 Feb</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 8</h2>
                <div class="day-box holiday">
                    <h3>الأحد</h3><span>إجازة يوم التأسيس</span>
                    <p>8-24 / 23 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>8-25 / 24 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>8-26 / 25 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>8-27 / 26 Feb</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>8-28 / 27 Feb</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>8-29 / 28 Feb</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>9-1 / 01 Mar</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 9</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>9-2 / 02 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>9-3 / 03 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>9-4 / 04 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>9-5 / 05 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>9-6 / 06 Mar</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>9-7 / 07 Mar</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>9-8 / 08 Mar</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 10</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>9-9 / 09 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>9-10 / 10 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>9-11 / 11 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>9-12 / 12 Mar</p>
                </div>
                <div class="day-box holiday">
                    <h3>الخميس</h3><span>بداية إجازة عيد الفطر</span>
                    <p>9-13 / 13 Mar</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>9-14 / 14 Mar</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>9-15 / 15 Mar</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 11</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>9-16 / 16 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>9-17 / 17 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>9-18 / 18 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>9-19 / 19 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>9-20 / 20 Mar</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>9-21 / 21 Mar</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>9-22 / 22 Mar</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 12</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>9-23 / 23 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>9-24 / 24 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>9-25 / 25 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>9-26 / 26 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>9-27 / 27 Mar</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>9-28 / 28 Mar</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>9-29 / 29 Mar</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 13</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>10-1 / 30 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>10-2 / 31 Mar</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>10-3 / 01 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>10-4 / 02 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>10-5 / 03 Apr</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>10-6 / 04 Apr</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>10-7 / 05 Apr</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 14</h2>
                <div class="day-box holiday">
                    <h3>الأحد</h3><span>بداية الدراسة بعد إجازة عيد الفطر</span>
                    <p>10-8 / 06 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>10-9 / 07 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>10-10 / 08 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>10-11 / 09 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>10-12 / 10 Apr</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>10-13 / 11 Apr</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>10-14 / 12 Apr</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 15</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>10-15 / 13 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>10-16 / 14 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>10-17 / 15 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>10-18 / 16 Apr</p>
                </div>
                <div class="day-box event">
                    <h3>الخميس</h3><span>آخر موعد للاعتذار (سنوي)</span>
                    <p>10-19 / 17 Apr</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>10-20 / 18 Apr</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>10-21 / 19 Apr</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 16</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>10-22 / 20 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>10-23 / 21 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>10-24 / 22 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>10-25 / 23 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>10-26 / 24 Apr</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>10-27 / 25 Apr</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>10-28 / 26 Apr</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 17</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>10-29 / 27 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>10-30 / 28 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>11-1 / 29 Apr</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>11-2 / 30 Apr</p>
                </div>
                <div class="day-box event">
                    <h3>الخميس</h3><span>آخر موعد للاعتذار عن الفصل أو مقرر</span>
                    <p>11-3 / 01 May</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>11-4 / 02 May</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>11-5 / 03 May</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 18</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>11-6 / 04 May</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>11-7 / 05 May</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>11-8 / 06 May</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>11-9 / 07 May</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>11-10 / 08 May</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>11-11 / 09 May</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>11-12 / 10 May</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 19</h2>
                <div class="day-box event">
                    <h3>الأحد</h3><span>بداية الاختبارات النهائية الإعداد العام</span>
                    <p>11-13 / 11 May</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>11-14 / 12 May</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>11-15 / 13 May</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>11-16 / 14 May</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>11-17 / 15 May</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>11-18 / 16 May</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>11-19 / 17 May</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 20</h2>
                <div class="day-box event">
                    <h3>الأحد</h3><span>بداية الاختبارات النهائية</span>
                    <p>11-20 / 18 May</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>11-21 / 19 May</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>11-22 / 20 May</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>11-23 / 21 May</p>
                </div>
                <div class="day-box">
                    <h3>الخميس</h3>
                    <p>11-24 / 22 May</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>11-25 / 23 May</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>11-26 / 24 May</p>
                </div>
            </div>
            <div class="week">
                <h2>الأسبوع 21</h2>
                <div class="day-box">
                    <h3>الأحد</h3>
                    <p>11-27 / 25 May</p>
                </div>
                <div class="day-box">
                    <h3>الإثنين</h3>
                    <p>11-28 / 26 May</p>
                </div>
                <div class="day-box">
                    <h3>الثلاثاء</h3>
                    <p>11-29 / 27 May</p>
                </div>
                <div class="day-box">
                    <h3>الأربعاء</h3>
                    <p>12-1 / 28 May</p>
                </div>
                <div class="day-box event">
                    <h3>الخميس</h3><span>نهاية الاختبارات النهائية</span>
                    <p>12-2 / 29 May</p>
                </div>
                <div class="day-box" style="margin-top: 10px;">
                    <h3>الجمعة</h3>
                    <p>12-3 / 30 May</p>
                </div>
                <div class="day-box">
                    <h3>السبت</h3>
                    <p>12-4 / 31 May</p>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const calendarGrid = document.getElementById('calendar-grid');
            const calendarId = document.getElementById('calendar-id');

            // Function to generate and download PDF
            const printCalendarAsPDF = () => {
                // Initialize jsPDF with A3 size
                const { jsPDF } = window.jspdf;

                // Convert the calendar grid to a data URL image
                const calendarElement = document.body;

                const toggleButton = document.querySelector('#themeToggle'); // Select the button to hide
                const printButton = document.querySelector('#printButton'); // Select the button to hide

                // Temporarily hide the button
                printButton.style.display = 'none';
                toggleButton.style.display = 'none';

                html2canvas(calendarElement, {
                    scale: 2,
                    useCORS: true,
                }).then((canvas) => {
                    // Get the canvas dimensions
                    const imgData = canvas.toDataURL('image/jpeg');
                    const imgWidth = calendarElement.getBoundingClientRect().width; // Convert pixels to mm (1 px = 0.264583 mm)
                    const imgHeight = calendarElement.getBoundingClientRect().height; // Convert pixels to mm

                    const pdf = new jsPDF({
                        orientation: imgHeight > imgWidth ? 'portrait' : 'landscape',
                        unit: 'mm',
                        format: [imgWidth, imgHeight]
                    });


                    pdf.addImage(imgData, 'JPEG', 0, 0, imgWidth, imgHeight, '', 'FAST');



                    // Generate the PDF blob and preview it
                    const pdfBlob = pdf.output('blob');

                    // Calculate the size of the PDF in MB
                    const pdfSizeInBytes = pdfBlob.size; // Get the size in bytes
                    const pdfSizeInKB = pdfSizeInBytes / 1024; // Convert bytes to KB
                    const pdfSizeInMB = pdfSizeInBytes / (1024 * 1024); // Convert bytes to MB

                    document.getElementById('size').innerHTML = `PDF size: ${pdfSizeInMB > 1 ? pdfSizeInMB.toFixed(2) + " M" : pdfSizeInKB.toFixed(2) + " K"}B`;

                    const url = URL.createObjectURL(pdfBlob);
                    window.open(url, '_blank');

                    // Save the PDF
                    // pdf.save('calendar_a3.pdf');
                });
            };

            // Button to trigger the PDF generation
            const printButton = document.getElementById('printButton');
            // document.body.append(printButton, calendarGrid);

            printButton.addEventListener('click', printCalendarAsPDF);
        });
    </script>
    <script>
            let isDark = JSON.parse(localStorage.getItem('isDark')) || false;

            const updateTheme = () => {
                if (isDark) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            };

            updateTheme();

            const themeToggle = document.getElementById('themeToggle');
            themeToggle.addEventListener('click', () => {
                isDark = !isDark;
                localStorage.setItem('isDark', isDark);
                updateTheme();
            });
    </script>
    <script>
        // Function to parse the date from the day-box
        function parseDate(dateString) {
            const gregorianPart = dateString.split('/')[1].trim();
            const [day, month] = gregorianPart.split(' ');
            const currentYear = new Date().getFullYear();
            const date = new Date(`${month} ${day}, ${currentYear}`);
            return date;
        }

        // Function to create a wrapper for each day-box
        function wrapDayBoxes() {
            const dayBoxes = document.querySelectorAll('.day-box');

            dayBoxes.forEach(dayBox => {
                // Only wrap if not already wrapped
                if (!dayBox.parentElement.classList.contains('day-box-wrapper')) {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'day-box-wrapper';
                    dayBox.parentNode.insertBefore(wrapper, dayBox);
                    wrapper.appendChild(dayBox);
                }
            });
        }

        // Function to update day boxes with visual indicators
        function updateDayBoxes() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            // First ensure all day boxes are wrapped
            wrapDayBoxes();

            // Get all day box wrappers
            const dayBoxWrappers = document.querySelectorAll('.day-box-wrapper');

            dayBoxWrappers.forEach(wrapper => {
                const dayBox = wrapper.querySelector('.day-box');
                const dateParagraph = dayBox.querySelector('p');
                const dateText = dateParagraph.textContent;
                const boxDate = parseDate(dateText);

                // Remove any existing indicators
                const existingIndicator = wrapper.querySelector('.date-indicator');
                if (existingIndicator) {
                    existingIndicator.remove();
                }

                // Reset styles
                dayBox.classList.remove('past-date', 'current-date');
                dayBox.style.textDecoration = '';
                dayBox.style.opacity = '';
                dayBox.style.border = '';
                dayBox.style.boxShadow = '';

                if (boxDate < today) {
                    // Past date
                    dayBox.classList.add('past-date');

                    // Add checkmark before the day-box
                    const checkmark = document.createElement('span');
                    checkmark.className = 'date-indicator checkmark';
                    checkmark.innerHTML = '✓';
                    wrapper.insertBefore(checkmark, dayBox);

                    // Add strike-through effect
                    dayBox.style.textDecoration = 'line-through';
                    dayBox.style.textDecorationColor = '#666';
                    dayBox.style.opacity = '0.7';
                }
                else if (boxDate.getTime() === today.getTime()) {
                    // Current date
                    dayBox.classList.add('current-date');

                    // Add "TODAY" indicator
                    const todayIndicator = document.createElement('span');
                    todayIndicator.className = 'date-indicator today';
                    todayIndicator.innerHTML = '📍';
                    wrapper.insertBefore(todayIndicator, dayBox);

                    // Highlight current day
                    dayBox.style.border = '2px solid #007bff';
                    dayBox.style.boxShadow = '0 0 10px rgba(0,123,255,0.2)';
                }
            });
        }

        // Add required CSS
        const styles = `
        .day-box-wrapper {
            position: relative;
            margin-bottom: 5px;
        }
        
        .date-indicator {
            position: absolute;
            top: -8px;
            right: -8px;
            z-index: 1;
            background-color: white;
            border-radius: 50%;
            padding: 2px;
            font-size: 14px;
        }
        
        .checkmark {
            color: #28a745;
            font-weight: bold;
        }
        
        .today {
            color: #007bff;
            font-weight: bold;
        }
        
        .past-date {
            background-color: #f8f9fa;
        }
        
        .current-date {
            background-color: #e8f4ff;
        }
    `;

        // Add styles to document
        const styleSheet = document.createElement("style");
        styleSheet.textContent = styles;
        document.head.appendChild(styleSheet);

        // Initialize on DOM content loaded
        document.addEventListener('DOMContentLoaded', () => {
            updateDayBoxes();

            // Performance optimization: Only update when tab becomes visible
            document.addEventListener('visibilitychange', () => {
                if (document.visibilityState === 'visible') {
                    updateDayBoxes();
                }
            });
        });

        // Backup initialization in case DOMContentLoaded already fired
        if (document.readyState !== 'loading') {
            updateDayBoxes();
        }
    </script>
</body>
</html>